<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
  
  const START_DATE = new Date(2017, 0, 1);
  const END_DATE = new Date(2017, 11, 31);
  const START = START_DATE.getTime();
  const END = END_DATE.getTime();
  const GREEN = '#009900';
  const RED = '#990000';
  const BLACK = '#000000';
  const DATA_ROWS = 24;

  google.charts.load("current", {packages:["timeline"]});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {

    var container = document.getElementById('mood');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();
    
    // NOTE: style must be the third column.
    dataTable.addColumn({ type: 'string', id: 'Category' });
    dataTable.addColumn({ type: 'string', id: 'Value' });
    dataTable.addColumn({ type: 'string', id: 'style', role: 'style'});
    dataTable.addColumn({ type: 'date', id: 'Start' });
    dataTable.addColumn({ type: 'date', id: 'End' });

    let rows = generateRows();

    rows.forEach(bar => {
        if (bar[1] < 0.5) {
            bar[2] = GREEN;
            bar[1] = label(bar[0], true);
        }
        else {
            bar[2] = RED;
            bar[1] = label(bar[0], false);
        }
    });

    rows.push(['Mood', "", BLACK, START_DATE, START_DATE]);
    rows.push(['Mind', "", BLACK, START_DATE, START_DATE]);
    rows.push(['Health', "", BLACK, START_DATE, START_DATE]);
    rows.push(['Mind', "", BLACK, END_DATE, END_DATE]);
    rows.push(['Mood', "", BLACK, END_DATE, END_DATE]);
    rows.push(['Health', "", BLACK, END_DATE, END_DATE]);

    dataTable.addRows(rows);
    chart.draw(dataTable);
  }

  function label(cat, good) {
    return "";
    // if (good) return cat == "Mood" ? "Good" : cat == "Mind" ? "Clear" : "Healthy";
    // else return cat == "Mood" ? "Not good" : cat == "Mind" ? "Confused" : "Unwell";
  }

  function generateRows() {

    let getDate = () => new Date(START + (Math.random() * (END - START)));
    let rv = [];

    for (let i = 0; i < DATA_ROWS; i++) {

      let currentDate = getDate();

      rv.push(['Mood', Math.random(), null, currentDate, currentDate]);
      rv.push(['Mind', Math.random(), null, currentDate, currentDate]);
      rv.push(['Health', Math.random(), null, currentDate, currentDate]);
    }

    return rv;
  }
</script>

<div style="text-align: center; font-size: 20px"><b>
    Mood trends for Yang Tian Wei Iskandar
</b></div>
<br/>
<div id="mood" style="height: 200px;"></div>